<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compare the contents of Remote and Local Directories — box_dir_diff • boxr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Compare the contents of Remote and Local Directories — box_dir_diff" />

<meta property="og:description" content="box_dir_diff is the internal function used by
box_fetch() and box_push() to determine how to
which files and folders should be uploaded/downloaded, updated,
or deleted, to synchronize remote and local directories." />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">boxr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.4.99999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/boxr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-box/boxr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compare the contents of Remote and Local Directories</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-box/boxr/blob/master/R/boxr__internal_dir_comparison.R'><code>R/boxr__internal_dir_comparison.R</code></a></small>
    <div class="hidden name"><code>box_dir_diff.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>box_dir_diff</code> is the internal function used by
<code><a href='box_fetch.html'>box_fetch()</a></code> and <code><a href='box_fetch.html'>box_push()</a></code> to determine how to
which files and folders should be uploaded/downloaded, updated,
or deleted, to synchronize remote and local directories.</p>
    
    </div>

    <pre class="usage"><span class='fu'>box_dir_diff</span>(<span class='kw'>dir_id</span> <span class='kw'>=</span> <span class='fu'><a href='box_setwd.html'>box_getwd</a></span>(), <span class='kw'>local_dir</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>(), <span class='kw'>load</span> <span class='kw'>=</span> <span class='st'>"up"</span>,
  <span class='kw'>folders</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dir_id</th>
      <td><p>The id of the box.com folder which you'd like to use for the
comparison</p></td>
    </tr>
    <tr>
      <th>local_dir</th>
      <td><p>The path of the local folder which you'd like to use for the
comparison</p></td>
    </tr>
    <tr>
      <th>load</th>
      <td><p><code>logical</code>. Should the results be in the context of an upload
or a download operation? Permitted values are <code>"up"</code> or <code>"down"</code></p></td>
    </tr>
    <tr>
      <th>folders</th>
      <td><p><code>logical</code>. Should folders/directories be included in the
result?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>boxr_dir_comparison</code>, describing the
differences between the files.</p>
<p>It is a named list, it's entries containing data frames,
describing the files in each of the following categories:</p>
<dl class='dl-horizontal'>
<dt><strong><code>new</code></strong></dt><dd><p>Files which are present in the origin, but not the destination. These
will be downloaded by <code><a href='box_fetch.html'>box_fetch()</a></code>/uploaded by
<code><a href='box_fetch.html'>box_push()</a></code>.</p></dd>
<dt><strong><code>superfluous</code></strong></dt><dd><p>These are files which are present in the destination, but not the
origin. If <code>delete</code> is set to <code>TRUE</code> in
<code><a href='box_fetch.html'>box_fetch()</a></code>/<code><a href='box_fetch.html'>box_push()</a></code>, they will be deleted.</p></dd>
<dt><strong><code>to_update</code></strong></dt><dd><p>Files which are present in both the orign and the destination, but
which have more recently modified copies in the origin. If downloading
with <code><a href='box_fetch.html'>box_fetch()</a></code>, and <code>overwrite</code> set to <code>TRUE</code>,
new files will overwrite existing local copies. If uploading with
<code><a href='box_fetch.html'>box_push()</a></code> (and <code>overwrite</code> set to <code>TRUE</code>), the
new version will be uploaded to box.com, with a new version number, and
the old version still being available.</p></dd>
<dt><strong><code>up_to_date</code></strong></dt><dd><p>Files present in both origin and destination, with the same content.
Note: A file may be modified at later date, but if it has identical
contents according to it's <code>sha1</code> hash, it will be considered
up-to-date. <code><a href='box_fetch.html'>box_fetch()</a></code>/<code><a href='box_fetch.html'>box_push()</a></code> do nothing for these
files.</p></dd>
<dt><strong><code>behind</code></strong></dt><dd><p>Files which are present in both origin and destination, but where the
content differs, and the version in the destination has been more
recently updated. <code><a href='box_fetch.html'>box_fetch()</a></code>/<code><a href='box_fetch.html'>box_push()</a></code> do nothing for these
files.</p></dd>
<dt><strong><code>new_folders</code></strong></dt><dd><p>Analogous to the file operation, but for directories/folders.</p></dd>
<dt><strong><code>superfluous_folders</code></strong></dt><dd><p>Analogous to the file operation, but for directories/folders.</p></dd>
</dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>box_dir_diff</code> works by comparing files in the <strong>'origin'</strong> to
those in the <strong>'destination'</strong>.</p>
<p>For downloading files (e.g. with <code><a href='box_fetch.html'>box_fetch()</a></code>), the origin is
the remote folder on box.com specified with <code>dir_id</code>, and the
destination would be the local directory specified by <code>local_dir</code>.</p>
<p>The reverse is true for uploads (e.g. via <code><a href='box_fetch.html'>box_fetch()</a></code>).</p>
<p><code>box_dir_diff</code> decides what should happen to a file based on three
peices of information:</p>
<dl class='dl-horizontal'>
<dt><strong>Presence</strong></dt><dd><p>Is the file present in both the origin and destination? The filename
(within the directory structure) is used to determine this.</p></dd>
<dt><strong>Content</strong></dt><dd><p>If a file is present in both the origin and the destination, does it
have the same content? The defintion comes from the file's <code>sha1</code>
hash, which for local files is determined using the
<code>digest()</code> function from the package of the same name. For
remote files, it is queried from the box.com API.</p></dd>
<dt><strong>Modification Date</strong></dt><dd><p>If a file is present in both the origin and destination, and the
content is different in each, boxr will prefer the file which was most
recently modified.
    For local files, the 'content modified time' is used; the <code>mtime</code>
variable returned by <code><a href='https://www.rdocumentation.org/packages/base/topics/file.info'>file.info()</a></code>.
    For remote files, the <code>modified_at</code> date returned by the box.com API.
This is the time that the file was modified on the box.com servers, as
opposed to the time that the content itself was modified.</p></dd>
</dl>
    <p><strong>Why not use the content modified time for both?</strong></p>
<p>With regards to the box.com API, <code>modified_at</code> is preferred to
<code>content_modified_at</code>, as it includes changes to the file outside of
just it's content. This means that, for example, a collaborator could
roll back to a previous version of a file, or upload a preferred but
older version. These actions count as modifications on the box.com
servers, but not to the content of the file itself (they are reflected
in <code>modified_at</code>, but not <code>content_modified_at</code>).</p>
<p>Implementing similar functionality for local files is not possible in a
platform-independent manner; content modified time is the only file-based
timestamp which has a consistent defintion for UNIX and Windows
systems.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://developers.box.com/docs'>https://developers.box.com/docs</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='box_fetch.html'>box_fetch()</a></code> and <code><a href='box_fetch.html'>box_push()</a></code>, which depend on
this internal function, <code><a href='https://www.rdocumentation.org/packages/base/topics/file.info'>file.info()</a></code> for timestamps describing
local files, <code>digest()</code> for details of the <code>sha1</code> algorithm
implementation.</p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

    <h2>Author</h2>
    <p>Brendan Rocks <a href='mailto:foss@brendanrocks.com'>foss@brendanrocks.com</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Brendan Rocks, Ian Lyttle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

